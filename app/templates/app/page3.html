{% extends "base_form.html" %}
{% block title %}Page3{% endblock title %}
{% block content %}
<form action="{% url 'page3' %}" method="post">
    {% csrf_token %}
    <!-- Section 3: Employment Details -->
    <section>
        <h4>3. Employment Details</h4>

        <!-- Subsection A: Present Employment -->
        <fieldset>
            <legend>(A) Present Employment</legend>

            <div class="row">
                <div class="col">
                    <label for="position">Position:</label>
                    {{ page3_form.position.errors }}
                    <input type="text" id="position" name="position" value="{{ page3_form.position.value }}">
                </div>
                <div class="col">
                    <label for="organisation">Organisation/Institution:</label>
                    {{ page3_form.organisation.errors }}
                    <input type="text" id="organisation" name="organisation" value="{{ page3_form.organisation.value }}">
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <label for="status">Status:</label>
                    {{ page3_form.status.errors }}
                    <select id="status" name="status">
                        <option value="Central Govt." {% if page3_form.status.value == "Central Govt." %} selected {% endif %}>Central Govt.</option>
                        <option value="State Govt." {% if page3_form.status.value == "State Govt." %} selected {% endif %}>State Govt.</option>
                        <option value="Private" {% if page3_form.status.value == "Private" %} selected {% endif %}>Private</option>
                        <option value="Quasi Govt." {% if page3_form.status.value == "Quasi Govt." %} selected {% endif %}>Quasi Govt.</option>
                        <option value="Self Employed" {% if page3_form.status.value == "Self Employed" %} selected {% endif %}>Self Employed</option>
                        <option value="Others" {% if page3_form.status.value == "Others" %} selected {% endif %}>Others</option>
                    </select>
                </div>
                <div class="col">
                    <label for="joiningDate">Date of Joining:</label>
                    {{ page3_form.joining_date.errors }}
                    <input type="date" id="joiningDate" name="joining_date" value="{{ page3_form.joining_date.value }}">
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <label for="leavingDate">Date of Leaving:</label>
                    {{ page3_form.leaving_date.errors }}
                    <input type="date" id="leavingDate" name="leaving_date" value="{{ page3_form.leaving_date.value }}">
                </div>
                <div class="col">
                    <label for="duration">Duration (in years):</label>
                    {{ page3_form.duration.errors }}
                    <input type="number" id="duration" name="duration" value="{{ page3_form.duration.value }}">
                </div>
            </div>
        </fieldset>

        <!-- Subsection B: Employment History (After PhD, Starting with Latest) -->
        <fieldset>
            <legend>(B) Employment History (After PhD, Starting with Latest)</legend>

            <button type="button" id="addRowBtn3B" class="btn btn-primary mb-3">Add Employment History</button>
            <div class="table-responsive">
                <table class="table" id="employmentHistoryTable">
                    <thead>
                        <tr>
                            <th>Position</th>
                            <th>Organisation/Institution</th>
                            <th>Date of Joining</th>
                            <th>Date of Leaving</th>
                            <th>Duration (in years)</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>

                    </tbody>
                </table>
            </div>
        </fieldset>

        <!-- Subsection C: Teaching Experience (After PhD) -->
        <fieldset>
            <legend>(C) Teaching Experience (After PhD)</legend>
            <button type="button" id="addRowBtn3C" class="btn btn-primary mb-3">Add Teaching Experience</button>
            <div class="table-responsive">
                <table class="table" id="teachingExpTable">
                    <thead>
                        <tr>
                            <th>Position</th>
                            <th>Employer</th>
                            <th>Course Taught</th>
                            <th>UG/PG</th>
                            <th>Number of Students</th>
                            <th>Date of Joining</th>
                            <th>Date of Leaving</th>
                            <th>Duration (in years)</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>

                    </tbody>
                </table>
            </div>
        </fieldset>

        <!-- Subsection D: Research Experience (Post PhD, including Post Doctoral) -->
        <fieldset>
            <legend>(D) Research Experience (Post PhD, including Post Doctoral)</legend>
            <button type="button" id="addRowBtn3D" class="btn btn-primary mb-3">Add Research Experience</button>
            <div class="table-responsive">
                <table class="table" id="researchExpTable">
                    <thead>
                        <tr>
                            <th>Position</th>
                            <th>Institution</th>
                            <th>Supervisor</th>
                            <th>Date of Joining</th>
                            <th>Date of Leaving</th>
                            <th>Duration (in years)</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </fieldset>

        <!-- Subsection E: Industrial Experience -->
        <fieldset>
            <legend>(E) Industrial Experience</legend>
            <button type="button" id="addRowBtn3E" class="btn btn-primary mb-3">Add Industrial Experience</button>
            <div class="table-responsive">
                <table class="table" id="indExpTable">
                    <thead>
                        <tr>
                            <th>Organisation</th>
                            <th>Work Profile</th>
                            <th>Date of Joining</th>
                            <th>Date of Leaving</th>
                            <th>Duration (in years)</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </fieldset>
    </section>

    <!-- Section 4: Area(s) of Specialization and Current Area(s) of Research -->
    <section>
        <h4>4. Area(s) of Specialization and Current Area(s) of Research</h4>
        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="area_of_specialization" class="form-label">Area(s) of Specialization:</label>
                    {{ page3_form.area_of_specialization.errors }}
                    <textarea class="form-control" name="area_of_specialization" id="area_of_specialization" rows="5">{{ page3_form.area_of_specialization.value }}</textarea>
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="area_of_research" class="form-label">Current Area(s) of Research:</label>
                    {{ page3_form.area_of_research.errors }}
                    <textarea class="form-control" name="area_of_research" id="area_of_research" rows="5">{{ page3_form.area_of_research.value }}</textarea>
                </div>
            </div>
        </div>
    </section>

    <!-- Save and Next button -->
    <div class="btn-container">
        <a href="{% url 'page2' %}" class="btn btn-success mx-3">Previous Page</a>
        <button type="submit" id="nextButton">Save And Next</button>
    </div>
</form>
<script>
    // JavaScript for dynamic addition and deletion of rows
    document.addEventListener('DOMContentLoaded', function () {

        //3B
        const addRowBtn3B = document.getElementById('addRowBtn3B');
        const tableBody3B = document.querySelector('#employmentHistoryTable tbody');

        // Add event listener for add button
        addRowBtn3B.addEventListener('click', function () {
            const newRow = `
          <tr>
            <td><input type="text" name="employment_position_"></td>
            <td><input type="text" name="employment_organisation_"></td>
            <td><input type="date" name="employment_join_date_"></td>
            <td><input type="date" name="employment_leave_date_"></td>
            <td><input type="number" name="employment_duration_"></td>
            <td><button type="button" class="btn btn-danger deleteRowBtn">Delete</button></td>
        </tr>
          `;
            tableBody3B.insertAdjacentHTML('beforeend', newRow);
        });

        // Add event listener for delete button
        tableBody3B.addEventListener('click', function (event) {
            if (event.target.classList.contains('deleteRowBtn')) {
                event.target.closest('tr').remove();
            }
        });

        //3C
        const addRowBtn3C = document.getElementById('addRowBtn3C');
        const tableBody3C = document.querySelector('#teachingExpTable tbody');
        // Add event listener for add button
        addRowBtn3C.addEventListener('click', function () {
            const newRow = `
          <tr>
              <td>
                  <input type="text" name="teaching_position_" />
              </td>
              <td>
                  <input type="text" name="teaching_employer_" />
              </td>
              <td>
                  <input type="text" name="teaching_course_" />
              </td>
              <td>
                  <select name="teaching_type_">
                      <option value="UG">UG</option>
                      <option value="PG">PG</option>
                  </select>
              </td>
              <td>
                  <input type="number" name="teaching_students_" />
              </td>
              <td>
                  <input type="date" name="teaching_join_date_" />
              </td>
              <td>
                  <input type="date" name="teaching_leave_date_" />
              </td>
              <td>
                  <input type="number" name="teaching_duration_" />
              </td>
             <td><button type="button" class="btn btn-danger deleteRowBtn">Delete</button></td>
        </tr>
          `;
            tableBody3C.insertAdjacentHTML('beforeend', newRow);
        });

        // Add event listener for delete button
        tableBody3C.addEventListener('click', function (event) {
            if (event.target.classList.contains('deleteRowBtn')) {
                event.target.closest('tr').remove();
            }
        });

        //3D
        const addRowBtn3D = document.getElementById('addRowBtn3D');
        const tableBody3D = document.querySelector('#researchExpTable tbody');
        // Add event listener for add button
        addRowBtn3D.addEventListener('click', function () {
            const newRow = `
          <tr>
            <td><input type="text" name="research_position_"></td>
            <td><input type="text" name="research_institution_"></td>
            <td><input type="text" name="research_supervisor_"></td>
            <td><input type="date" name="research_join_date_"></td>
            <td><input type="date" name="research_leave_date_"></td>
            <td><input type="number" name="research_duration_"></td>
            <td><button type="button" class="btn btn-danger deleteRowBtn">Delete</button></td>
        </tr>
          `;
            tableBody3D.insertAdjacentHTML('beforeend', newRow);
        });

        // Add event listener for delete button
        tableBody3D.addEventListener('click', function (event) {
            if (event.target.classList.contains('deleteRowBtn')) {
                event.target.closest('tr').remove();
            }
        });


        //3E
        const addRowBtn3E = document.getElementById('addRowBtn3E');
        const tableBody3E = document.querySelector('#indExpTable tbody');
        // Add event listener for add button
        addRowBtn3E.addEventListener('click', function () {
            const newRow = `
          <tr>
            <td><input type="text" name="industrial_organisation_"></td>
            <td><input type="text" name="industrial_profile_"></td>
            <td><input type="date" name="industrial_join_date_"></td>
            <td><input type="date" name="industrial_leave_date_"></td>
            <td><input type="number" name="industrial_duration_"></td>
            <td><button type="button" class="btn btn-danger deleteRowBtn">Delete</button></td>
        </tr>
          `;
            tableBody3E.insertAdjacentHTML('beforeend', newRow);
        });

        // Add event listener for delete button
        tableBody3E.addEventListener('click', function (event) {
            if (event.target.classList.contains('deleteRowBtn')) {
                event.target.closest('tr').remove();
            }
        });


    });
</script>
{% endblock content %}